# PQC Encryption/Decryption API

This project demonstrates how to implement encryption and decryption using Post-Quantum Cryptography (PQC) with the Cloudflare CIRCL library in Go. The API provides endpoints to encrypt and decrypt messages using the Kyber KEM scheme.

## Prerequisites

- Go 1.16 or higher
- Cloudflare CIRCL library
- Key pairs for Kyber KEM scheme

## Installation

1. Clone the repository:
    ```sh
    git clone git@github.com:Kkmikaze/com.go-pqc.git
    cd go-pqc
    ```

2. Install the Cloudflare CIRCL library:
    ```sh
    go get -u github.com/cloudflare/circl
    ```

## Usage

1. Generate Key Pairs:
    ```sh
    go run cli/main.go
    ```

2. Start the API server:
    ```sh
    go run rest-api/main.go
    ```

3. Encrypt and Decrypt using the API:

    - **Encrypt**
        - Endpoint: `POST /encrypt`
        - Request Body:
            ```json
            {
                "plaintext": "Your secret message"
            }
            ```
        - Response Body:
            ```json
            {
                "ciphertext": "Base64 encoded ciphertext"
            }
            ```

    - **Decrypt**
        - Endpoint: `POST /decrypt`
        - Request Body:
            ```json
            {
                "ciphertext": "Base64 encoded ciphertext"
            }
            ```
        - Response Body:
            ```json
            {
                "plaintext": "Your decrypted message"
            }
            ```

## Example

### Encrypt Request

```sh
curl -X POST http://localhost:4000/encrypt -H "Content-Type: application/json" -d '{"plaintext":"Hello, this is a secret message!"}'
```

### Encrypt Response:
```json
{
    "ciphertext": "Base64 encoded ciphertext"
}
```

### Decrypt Request

```sh
curl -X POST http://localhost:4000/decrypt -H "Content-Type: application/json" -d '{"ciphertext":"Base64 encoded ciphertext"}'
```

### Decrypt Response:
```json
{
    "plaintext": "Hello, this is a secret message!"
}
```

## Key Derivation Function
The project uses HKDF (HMAC-based Key Derivation Function) to derive a symmetric key suitable for AES encryption from the shared secret generated by the Kyber KEM scheme.


